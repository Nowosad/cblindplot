<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Two possible workflows with cblindplot • cblindplot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Two possible workflows with cblindplot">
<meta property="og:description" content="cblindplot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cblindplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-example-of-cblindplot.html">Basic example of {cblindplot}</a>
    </li>
    <li>
      <a href="../articles/cblindplot_workflows.html">Two possible workflows with cblindplot</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="cblindplot_workflows_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Two possible workflows with cblindplot</h1>
            
      
      
      <div class="hidden name"><code>cblindplot_workflows.Rmd</code></div>

    </div>

    
    
<p>The goal of the <strong>cblindplot</strong> package is to provide a simple way to convert exisitng non-colorblind plots and maps into colorblind-friendly plots and maps.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">cblindplot</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="workflow-1">Workflow 1<a class="anchor" aria-label="anchor" href="#workflow-1"></a>
</h2>
<p>The first workflow is to use the <code><a href="../reference/cblind.plot.html">cblind.plot()</a></code> function directly on a raster object or file path. It works well when the original color palette of the input object is sequential.</p>
<p>Let’s start by reading an example image with a non-colorblind-friendly palette and visualize it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pic/imager.png"</span>, package <span class="op">=</span> <span class="st">"cblindplot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">my_image_terra</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">my_image</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plotRGB.html" class="external-link">plotRGB</a></span><span class="op">(</span><span class="va">my_image_terra</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>To update its color palette, we can use the <code>cblind.plot</code> function and provide a color vision deficiency (CVD) type. In this case, the <code><a href="../reference/cblind.plot.html">cblind.plot()</a></code> function will take the original image in RGB, extract its first principal component, and then apply a new color palette to the transformed single-band image.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cblind.plot.html">cblind.plot</a></span><span class="op">(</span><span class="va">my_image</span>, cvd <span class="op">=</span> <span class="st">"deuteranopia"</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Alternatively, we can provide a custom color palette to the <code>cvd</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">7</span>, palette <span class="op">=</span> <span class="st">"Sunset"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cblind.plot.html">cblind.plot</a></span><span class="op">(</span><span class="va">my_image</span>, cvd <span class="op">=</span> <span class="va">my_palette</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>The above approach, however, does not work well when the original color palette of the input object is more complex (e.g., diverging). You can see it by running the following code.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_image2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pic/rainbowr.png"</span>, package <span class="op">=</span> <span class="st">"cblindplot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">my_image_terra2</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">my_image2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plotRGB.html" class="external-link">plotRGB</a></span><span class="op">(</span><span class="va">my_image_terra2</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cblind.plot.html">cblind.plot</a></span><span class="op">(</span><span class="va">my_image2</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<p>Here, both low and high values are mapped to the same dark color and it is impossible to distinguish them.</p>
</div>
<div class="section level2">
<h2 id="workflow-2">Workflow 2<a class="anchor" aria-label="anchor" href="#workflow-2"></a>
</h2>
<p>The second workflow also uses the <code><a href="../reference/cblind.plot.html">cblind.plot()</a></code> function but it requires to provide an image of the color legend as well.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_legend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pic/legendr.png"</span>, package <span class="op">=</span> <span class="st">"cblindplot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">my_terra_legend</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">my_legend</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plotRGB.html" class="external-link">plotRGB</a></span><span class="op">(</span><span class="va">my_terra_legend</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In this case, the order of the colors in the legend are used to update the color palette of the input object.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cblind.plot.html">cblind.plot</a></span><span class="op">(</span><span class="va">my_image2</span>, legend <span class="op">=</span> <span class="va">my_legend</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Here, we can also customize the color palette by providing a custom color palette to the <code>cvd</code> argument.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">7</span>, palette <span class="op">=</span> <span class="st">"Sunset"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cblind.plot.html">cblind.plot</a></span><span class="op">(</span><span class="va">my_image2</span>, cvd <span class="op">=</span> <span class="va">my_palette</span>, legend <span class="op">=</span> <span class="va">my_legend</span><span class="op">)</span></span></code></pre></div>
<p><img src="cblindplot_workflows_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Elisa Thouverai, Duccio Rocchini, Jakub Nowosad.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
